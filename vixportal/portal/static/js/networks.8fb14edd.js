(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["networks"],{"0c6d":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var r=a("bc3a"),o=a.n(r);function n(t){var e=o.a.create({baseURL:window.url.ssourl,timeout:5e3});return e(t)}function s(t){var e=o.a.create({baseURL:window.url.coreurl,timeout:5e3});return e(t)}function i(t){var e=o.a.create({baseURL:window.url.vneturl,timeout:5e3});return e(t)}},"1da1":function(t,e,a){"use strict";function r(t,e,a,r,o,n,s){try{var i=t[n](s),l=i.value}catch(c){return void a(c)}i.done?e(l):Promise.resolve(l).then(r,o)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(o,n){var s=t.apply(e,a);function i(t){r(s,o,n,i,l,"next",t)}function l(t){r(s,o,n,i,l,"throw",t)}i(void 0)}))}}a.d(e,"a",(function(){return o}))},2783:function(t,e,a){},"6ae0":function(t,e,a){"use strict";a("2783")},af38:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-guide"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:""}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.AddNetworkForm=!0}}}),a("el-dialog",{attrs:{title:"创建虚拟网络",visible:t.AddNetworkForm,width:"35%","close-on-click-modal":!1,center:""},on:{close:t.AddNetworkDialogClose,"update:visible":function(e){t.AddNetworkForm=e}}},[a("el-form",{ref:"AddNetworkRef",attrs:{model:t.add_network,rules:t.AddNetworkRules,"label-width":"150px","label-position":"left"}},[a("el-form-item",{attrs:{label:"虚拟网络名称",prop:"name"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"输入虚拟网络名称","auto-complete":"off"},model:{value:t.add_network.name,callback:function(e){t.$set(t.add_network,"name",e)},expression:"add_network.name"}})],1),a("el-form-item",{attrs:{label:"计算资源池",prop:"zone"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"选择计算资源池"},on:{focus:t.getZoneData},model:{value:t.add_network.zone,callback:function(e){t.$set(t.add_network,"zone",e)},expression:"add_network.zone"}},t._l(t.ZonesData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.zone,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"虚拟网络类型",prop:"mode"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择虚拟网络类型"},model:{value:t.add_network.mode,callback:function(e){t.$set(t.add_network,"mode",e)},expression:"add_network.mode"}},[a("el-option",{key:"flat",attrs:{label:"普通网络",value:"flat"}}),a("el-option",{key:"vlan",attrs:{label:"vlan网络",value:"vlan"}})],1)],1),"vlan"==t.add_network.mode?a("div",[a("el-form-item",{attrs:{label:"VLAN ID",prop:"vlanid"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"VLAN ID","auto-complete":"off"},model:{value:t.add_network.vlanid,callback:function(e){t.$set(t.add_network,"vlanid",e)},expression:"add_network.vlanid"}})],1),a("el-form-item",{attrs:{label:"VLAN管理",prop:"swmode"}},[a("el-radio-group",{model:{value:t.add_network.swmode,callback:function(e){t.$set(t.add_network,"swmode",e)},expression:"add_network.swmode"}},[a("el-radio",{attrs:{label:1}},[t._v("普通")]),a("el-radio",{attrs:{label:2}},[t._v("VLAN")]),a("el-radio",{attrs:{label:3}},[t._v("M/GVRP")])],1)],1)],1):t._e(),a("el-form-item",{attrs:{label:"虚拟网络地址",prop:"addr"}},[a("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"10.0.0.0/24","auto-complete":"off"},model:{value:t.add_network.addr,callback:function(e){t.$set(t.add_network,"addr",e)},expression:"add_network.addr"}}),t._v("\n          /\n          "),a("el-select",{staticStyle:{width:"98px"},model:{value:t.add_network.prefix,callback:function(e){t.$set(t.add_network,"prefix",e)},expression:"add_network.prefix"}},t._l(t.NumList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"虚拟网络网关",prop:"gateway"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"10.0.0.1","auto-complete":"off"},model:{value:t.add_network.gateway,callback:function(e){t.$set(t.add_network,"gateway",e)},expression:"add_network.gateway"}})],1),a("el-form-item",{attrs:{label:"DHCP地址池",prop:"dhcpool"}},[a("el-input",{staticStyle:{width:"134px"},attrs:{placeholder:"10.0.0.100","auto-complete":"off"},model:{value:t.add_network.dhcpstart,callback:function(e){t.$set(t.add_network,"dhcpstart",e)},expression:"add_network.dhcpstart"}}),t._v("\n          ,\n          "),a("el-input",{staticStyle:{width:"134px"},attrs:{placeholder:"10.0.0.200","auto-complete":"off"},model:{value:t.add_network.dhcpstop,callback:function(e){t.$set(t.add_network,"dhcpstop",e)},expression:"add_network.dhcpstop"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.CreateNetwork}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.AddNetworkForm=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"修改网络用户",visible:t.SetNetUserForm,width:"30%","close-on-click-modal":!1,center:""},on:{close:t.SetUserDialogClose,"update:visible":function(e){t.SetNetUserForm=e}}},[a("el-form",{ref:"SetNETUserRef",attrs:{model:t.netuser,rules:t.SetNETUserRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"虚拟网络用户",prop:"user"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"虚拟网络用户"},model:{value:t.netuser.user,callback:function(e){t.$set(t.netuser,"user",e)},expression:"netuser.user"}},t._l(t.UserList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.username,value:t.username}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.UserSet}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.SetNetUserForm=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"虚拟网络详细资料",visible:t.DetailNetTable,width:"40%","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.DetailNetTable=e}}},[a("div",[a("b-table-simple",{attrs:{hover:"",small:"","caption-top":"",responsive:""}},[a("b-tbody",[a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("网络名称")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.name))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("网络模式")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.mode))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("VLANID")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.vlanid))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("网络权限")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.perm))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("网络用户")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.user))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("网络地址")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.addr))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("网络网关")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.gateway))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("DHCP地址范围")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.dhcpool))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("网络网桥")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.brname))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("命令空间")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.nsname))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("使用状态")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.state))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("运行状态")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.run))]),a("b-td",{attrs:{colspan:"2"}})],1),a("b-tr",[a("b-td",{attrs:{colspan:"1"}},[t._v("创建时间")]),a("b-td",{attrs:{colspan:"1"}},[t._v(t._s(t.NetworkData.create_time))]),a("b-td",{attrs:{colspan:"2"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.DetailNetTable=!1}}},[t._v("关 闭")])],1)])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.NetworksData,"header-cell-class-name":"table-header"}},[t.show?a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"80"}}):t._e(),a("el-table-column",{attrs:{prop:"name",label:"虚拟网络名称",align:"center",width:"180px"}}),a("el-table-column",{attrs:{prop:"mode",label:"虚拟网络类型",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return["flat"===e.row.mode?a("span",{staticStyle:{color:"#37B328"}},[t._v("普通网络")]):"vlan"===e.row.mode?a("span",{staticStyle:{color:"blue"}},[t._v("VLAN网络")]):"vxlan"===e.row.mode?a("span",{staticStyle:{color:"blue"}},[t._v("VXLAN网络")]):a("span",{staticStyle:{color:"red"}},[t._v("网络类型错误")])]}}])}),a("el-table-column",{attrs:{prop:"addr",label:"虚拟网络地址",align:"center",width:"180px"}}),a("el-table-column",{attrs:{prop:"perm",label:"网络权限",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return["pv"===e.row.perm?a("span",{staticStyle:{color:"#37B328"}},[t._v("私有")]):a("span",{staticStyle:{color:"blue"}},[t._v("公开")])]}}])}),a("el-table-column",{staticStyle:{"font-size":"16px"},attrs:{prop:"state",label:"使用状态",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return["open"===t.row.state?a("span",{staticStyle:{color:"#37B328","font-size":"20px"}},[a("b-icon",{attrs:{icon:"toggle-on"}})],1):a("span",{staticStyle:{color:"red","font-size":"20px"}},[a("b-icon",{attrs:{icon:"toggle-off"}})],1)]}}])}),a("el-table-column",{staticStyle:{"font-size":"16px"},attrs:{prop:"run",label:"运行状态",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(t){return["start"===t.row.run?a("span",{staticStyle:{color:"#37B328","font-size":"20px"}},[a("b-icon",{attrs:{icon:"play-fill"}})],1):a("span",{staticStyle:{color:"red","font-size":"20px"}},[a("b-icon",{attrs:{icon:"stop-fill"}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"380px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return["start"===e.row.run?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"停止网络",placement:"top-start"}},[a("el-button",{staticStyle:{color:"red"},attrs:{type:"danger",plain:"",circle:""},on:{click:function(a){return t.StopNetwork(e.row)}}},[a("b-icon",{attrs:{icon:"stop-fill"}})],1)],1):"stop"===e.row.run?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"运行网络",placement:"top-start"}},[a("el-button",{staticStyle:{color:"green"},attrs:{type:"success",plain:"",circle:""},on:{click:function(a){return t.StartNetwork(e.row)}}},[a("b-icon",{attrs:{icon:"play"}})],1)],1):t._e(),"open"===e.row.state?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"禁用网络",placement:"top-start"}},[a("el-button",{staticStyle:{color:"red"},attrs:{type:"danger",plain:"",circle:""},on:{click:function(a){return t.Disable(e.row)}}},[a("b-icon",{attrs:{icon:"toggle-off"}})],1)],1):"lock"===e.row.state?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"启用网络",placement:"top-start"}},[a("el-button",{staticStyle:{color:"green"},attrs:{type:"success",plain:"",circle:""},on:{click:function(a){return t.Enable(e.row)}}},[a("b-icon",{attrs:{icon:"toggle-on"}})],1)],1):t._e(),"pv"===e.row.perm?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置虚拟网络公开",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",plain:"",circle:""},on:{click:function(a){return t.OpenPrem(e.row)}}},[a("b-icon",{attrs:{icon:"key"}})],1)],1):"pu"===e.row.perm?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置虚拟网络隐藏",placement:"top-start"}},[a("el-button",{attrs:{icon:"el-icon-key",circle:""},on:{click:function(a){return t.HidePrem(e.row)}}})],1):t._e(),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置网络用户",placement:"top-start"}},[a("el-button",{attrs:{icon:"el-icon-user",circle:""},on:{click:function(a){return t.SetNetworkUser(e.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"虚拟网络详情",placement:"top-start"}},[a("el-button",{attrs:{icon:"el-icon-more",circle:""},on:{click:function(a){return t.NetworkDetail(e.row.id)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除虚拟网络",placement:"top-start"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.NetworkDel(e.row)}}})],1)]}}])})],1),a("div",{staticClass:"block",staticStyle:{height:"70px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalRecords},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},o=[],n=(a("96cf"),a("1da1")),s=(a("7f7f"),a("0c6d")),i=sessionStorage.getItem("user_info"),l=JSON.parse(i),c={data:function(){return{show:!1,net:"",ZonesData:[],NumList:[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],UserList:[],NetworksData:[],NetworkData:[],AddNetworkForm:!1,SetNetUserForm:!1,DetailNetTable:!1,add_network:{name:"",zone:"",mode:"",vlanid:0,swmode:1,addr:"",prefix:"24",gateway:"",dhcpool:"",dhcpstart:"",dhcpstop:""},netuser:{id:"",user:l.username,name:""},AddNetworkRules:{name:[{required:!0,message:"请输入虚拟网络名称",trigger:"blur"}],zone:[{required:!0,message:"请选择资源区域",trigger:"blur"}],mode:[{required:!0,message:"请选择虚拟网络类型",trigger:"blur"}],vlanid:[{required:!0,message:"请输入vlan id,默认为0",trigger:"blur"}],addr:[{required:!0,message:"请输入虚拟网络地址",trigger:"blur"}],gateway:[{required:!0,message:"请输入虚拟网络网关",trigger:"blur"}],swmode:[{required:!0,message:"必须选择Vlan管理模式",trigger:"blur"}],dhcpstart:[{required:!0,message:"必须设置dhcp开始地址",trigger:"blur"}],dhcpstop:[{required:!0,message:"必须设置dhcp结束地址",trigger:"blur"}]},SetNETUserRules:{user:[{required:!0,message:"请输入用户",trigger:"blur"}]},page:{pageSize:10,totalRecords:0,totalPages:0,pageNum:0,pagelimit:0}}},mounted:function(){this.getNetworks()},methods:{SetUserDialogClose:function(){void 0!==this.$refs.SetNETUserRef&&this.$refs.SetNETUserRef.resetFields()},AddNetworkDialogClose:function(){void 0!==this.$refs.AddNetworkRef&&this.$refs.AddNetworkRef.resetFields()},getZoneData:function(){var t=this;this.ZonesData=[],Object(s["a"])({url:"/zonelist",method:"get",headers:{authorization:l.token_type+" "+l.access_token}}).then((function(e){t.ZonesData=e.data}))},getNetworks:function(){var t=this;this.NetworksData=[];var e=this.page,a=e.pageNum,r=e.pageSize,o=e.pagelimit;o=a*r,Object(s["b"])({url:"/networks?skip="+o+"&limit="+r,method:"get",headers:{authorization:l.token_type+" "+l.access_token}}).then((function(e){t.page.totalRecords=e.data.count,t.NetworksData=e.data.data}))},sizeChange:function(t){this.page.pageSize=t,this.getNetworks()},currentChange:function(t){this.page.pageNum=t-1,this.getNetworks()},CreateNetwork:function(){var t=this,e={name:this.add_network.name,zone:this.add_network.zone,mode:this.add_network.mode,vlanid:this.add_network.vlanid,swmode:this.add_network.swmode,addr:this.add_network.addr+"/"+this.add_network.prefix,gateway:this.add_network.gateway,dhcpool:this.add_network.dhcpstart+","+this.add_network.dhcpstop};this.$refs.AddNetworkRef.validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r){a.next=3;break}return t.$message.error("请输入虚拟网络参数"),a.abrupt("return",!1);case 3:Object(s["b"])({url:"/network",method:"post",data:e,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(e){200===e.data.code?(t.$message.success("增加虚拟网络"+e.data.data[0].network+"成功"),t.AddNetworkForm=!1,t.$refs.AddNetworkRef.resetFields(),t.getNetworks()):t.$message.error("增加虚拟网络失败,錯误  "+e.data.message)}));case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())},SetNetworkUser:function(t){this.FetchUserList(),this.SetNetUserForm=!0,this.netuser.id=t.id},FetchUserList:function(){var t=this;this.UserList=[],Object(s["c"])({url:"/userlist",method:"get",headers:{authorization:l.token_type+" "+l.access_token}}).then((function(e){t.UserList=e.data}))},UserSet:function(){var t=this;this.$refs.SetNETUserRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return t.$message.error("请选择虚拟网络的用户"),e.abrupt("return",!1);case 3:Object(s["b"])({url:"/setnetworkuser",method:"post",data:t.netuser,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(e){200===e.data.code?(t.$message.success("修改虚拟网络"+e.data.data[0].name+"的用户成功"),t.SetNetUserForm=!1,t.$refs.SetNETUserRef.resetFields()):t.$message.error("修改虚拟网络的用户失败,错误  "+e.data.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},StopNetwork:function(t){var e=this;if("start"===t.run){var a={id:t.id};this.$confirm("将设置虚拟网络"+t.name+"运行, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/stopnetwork/"+t.id,method:"post",data:a,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(a){200===a.data.code?(e.$message.success("虚拟网络"+a.data.data[0].network+"已停止"),e.getNetworks()):e.$message.error("虚拟网络"+t.name+"停止失败,原因  "+a.data.message)}))})).catch((function(){}))}},StartNetwork:function(t){var e=this;if("stop"===t.run){var a={id:t.id};this.$confirm("将设置虚拟网络"+t.name+"运行, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/startnetwork/"+t.id,method:"post",data:a,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(a){200===a.data.code?(e.$message.success("启动虚拟网络"+a.data.data[0].network+"，请等待"),e.getNetworks()):e.$message.error("虚拟网络"+t.name+"运行失败,原因  "+a.data.message)}))})).catch((function(){}))}},Disable:function(t){var e=this;if("flat"===t.mode)this.$message.error("虚拟网络"+t.name+"不能停用，网络类型错误");else if("open"===t.state){var a={id:t.id,state:"lock"};this.$confirm("设置虚拟网络"+t.name+"停用, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/setnetworkstate",method:"post",data:a,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(a){200===a.data.code?(e.$message.success("虚拟网络"+a.data.data[0].network+"已停用"),e.getNetworks()):e.$message.error("虚拟网络"+t.name+"停用失败,原因  "+a.data.message)}))})).catch((function(){}))}},Enable:function(t){var e=this;if("flat"===t.mode)this.$message.error("虚拟网络"+t.name+"不能启用，网络类型错误");else if("lock"===t.state){var a={id:t.id,state:"open"};this.$confirm("设置虚拟网络"+t.name+"启用, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/setnetworkstate",method:"post",data:a,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(a){200===a.data.code?(e.$message.success("虚拟网络"+a.data.data[0].network+"已启用"),e.getNetworks()):e.$message.error("虚拟网络"+t.name+"启用失败,原因  "+a.data.message)}))})).catch((function(){}))}},HidePrem:function(t){var e=this;if("pu"===t.perm){var a={id:t.id,perm:"pv"};this.$confirm("设置虚拟网络"+t.name+"为私有, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/setnetworkprem",method:"post",data:a,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(a){200===a.data.code?(e.$message.success("虚拟网络"+a.data.data[0].network+"权限已设置为私有"),e.getNetworks()):e.$message.error("磁盘镜像"+t.net_name+"权限已设置失败,原因未知")}))})).catch((function(){}))}},OpenPrem:function(t){var e=this;if("pv"===t.perm){var a={id:t.id,perm:"pu"};this.$confirm("设置虚拟网络"+t.name+"公开给所有用户, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/setnetworkprem",method:"post",data:a,headers:{authorization:l.token_type+" "+l.access_token}}).then((function(a){200===a.data.code?(e.$message.success("虚拟网络"+a.data.data[0].network+"权限已设置为公开"),e.getNetworks()):e.$message.error("虚拟网络"+t.name+"权限已设置失败,原因未知")}))})).catch((function(){}))}},NetworkDetail:function(t){var e=this;this.NetworkData=[],Object(s["b"])({url:"/network/"+t,method:"get",headers:{authorization:l.token_type+" "+l.access_token}}).then((function(t){e.NetworkData=t.data,e.DetailNetTable=!0}))},NetworkDel:function(t){var e=this;this.$confirm("将永久删除虚拟网络 "+t.name+", 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/deletenetwork/"+t.id,method:"post",headers:{authorization:l.token_type+" "+l.access_token}}).then((function(t){200===t.data.code?(e.$message.success("删除虚拟网络"+t.data.data[0].network+"成功"),e.getNetworks()):e.$message.error("删除虚拟网络失败,原因 "+t.data.message)}))})).catch((function(){}))},StartAllNets:function(){var t=this;this.$confirm("将启动所有启用的虚拟网络,是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])({url:"/startnets",method:"post",headers:{authorization:l.token_type+" "+l.access_token}}).then((function(e){200===e.data.code?(t.$message.success("所有虚拟网络启动成功"),t.getNetworks()):t.$message.error("有些虚拟网络启动失败，请手动检查")}))})).catch((function(){}))}}},d=c,u=(a("6ae0"),a("2877")),p=Object(u["a"])(d,r,o,!1,null,"662993c7",null);e["default"]=p.exports}}]);